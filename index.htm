<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíå For Skylar</title>
  <style>
    :root { --pad: 18px; --pink: #ff6b9d; --light-pink: #ffb6d9; --dark-pink: #c2185b; }
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(135deg, #ffe0ec 0%, #ffb6d9 30%, #ffc0cb 70%, #ffe0ec 100%);
      color:#333;
    }
    .card{
      width:min(560px, 94vw);
      background: linear-gradient(to bottom, rgba(255,255,255,0.98), rgba(255,245,248,0.98));
      border: 1px solid rgba(255,107,157,0.08);
      border-radius: 20px;
      box-shadow: 0 8px 28px rgba(0,0,0,0.06);
      overflow:hidden;
      position: relative;
      padding-bottom: 8px;
    }
    .snoopy-deco{
      width: 100%;
      height: 100%;
      pointer-events: none;
      object-fit: contain;
      background: transparent;
      display:block;
    }
    /* Snoopy wrapper: keep it small, anchored and non-intrusive. */
    .snoopy-wrap{
      position: absolute;
      right: -14px;
      bottom: -6px;
      width: 110px;
      height: 110px;
      border-radius: 14px;
      background: transparent; /* ensure no background so PNG transparency shows */
      display:flex; align-items:center; justify-content:center;
      z-index: 0;
      pointer-events: none;
    }
    /* Developer note: Use a true transparent PNG for `Snoopy Heart.png`. If you see a checkerboard pattern in the image, that means the checkerboard is baked into the pixels (image is not actually transparent). Replace with a PNG that has an actual alpha channel. */
    .top{
      padding: 18px 18px 12px;
      display:flex; gap:12px; align-items:center;
      background: transparent;
      position: relative;
      z-index: 1;
    }
    .badge{
      width:46px; height:46px; border-radius: 12px;
      display:grid; place-items:center;
      background: linear-gradient(135deg, rgba(255,107,157,0.12), rgba(255,182,193,0.08));
      font-size: 24px;
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }
    .title{ font-weight: 700; font-size: 18px; color: var(--dark-pink); }
    .subtitle{ font-size: 14px; opacity: 0.8; margin-top: 3px; color: var(--pink); }
    .content{ padding: 14px var(--pad) 10px; position: relative; z-index: 1; display:flex; flex-direction:column; gap:12px; }
    .bubble{
      background: rgba(255,255,255,0.9);
      border-radius: 14px;
      padding: 16px;
      font-size: 17px;
      line-height: 1.45;
      position: relative;
      color: #333;
      box-shadow: 0 6px 18px rgba(0,0,0,0.04);
    }
    .bubble:after{
      content:"";
      position:absolute;
      left: 24px;
      bottom:-12px;
      width:20px; height:20px;
      background:linear-gradient(135deg, rgba(255,255,255,0.98), rgba(255,250,250,0.95));
      border-left:2px solid rgba(255,107,157,0.15);
      border-bottom:2px solid rgba(255,107,157,0.15);
      transform: rotate(45deg);
    }
    .hint{ padding: 14px var(--pad) 0; font-size: 14px; opacity:0.7; color: var(--pink); font-style: italic; }
    .actions{
      padding: 16px var(--pad) 20px;
      display:flex; gap:10px; flex-wrap:wrap;
      position: relative;
      z-index: 1;
    }
    button{
      border:0; cursor:pointer; padding: 13px 16px;
      border-radius: 14px; font-weight: 650;
      font-size: 15px;
      transition: transform .1s ease, filter .15s ease, box-shadow .2s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    button:hover{ 
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    }
    button:active{ transform: scale(0.96); }
    .primary{ 
      background: linear-gradient(135deg, var(--pink), var(--light-pink));
      color:white; 
      font-weight: 700;
    }
    .secondary{ 
      background: linear-gradient(135deg, rgba(255,107,157,0.08), rgba(255,182,193,0.08));
      color: var(--pink);
      font-weight: 600;
    }
    .ghost{ background: transparent; border:2px dashed var(--pink); color: var(--pink); }
    .row{ display:flex; gap:10px; width:100%; }
    .row button{ flex: 1; }
    .footer{
      padding: 12px var(--pad) 16px;
      font-size: 13px; opacity: 0.65;
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      border-top: 1px solid rgba(255,107,157,0.1);
      position: relative;
      z-index: 1;
      color: var(--pink);
    }
    .yesScreen{
      padding: 32px var(--pad) 28px;
      text-align:center;
      position: relative;
      z-index: 1;
    }
    .big{
      font-size: 32px; font-weight: 800; margin: 14px 0 10px;
      background: linear-gradient(135deg, var(--dark-pink), var(--pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .small{
      font-size: 16px; opacity:0.8; margin:0 0 18px; color: #333;
    }
    .hearts{ font-size: 38px; letter-spacing: 4px; animation: pulse 1.5s ease-in-out infinite; }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    .snoopy-cheer {
      width: 180px;
      height: 180px;
      margin: 16px auto;
      animation: bounce 1s ease-in-out infinite;
      pointer-events: none;
      object-fit: contain;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }
    /* audio-player removed: using hidden audio element and autoplay-on-touch */
    /* Photo area (fixed aspect ratio) */
    .slideshow{
      position: relative;
      width: 100%;
      aspect-ratio: 16/9;
      max-height: 52vh;
      margin: 0 auto 6px;
      border-radius: 12px;
      overflow: hidden;
      background: #f7f5f6;
    }
    .slideshow img.slide{
      position: absolute; inset: 0; width: 100%; height: 100%;
      object-fit: contain; display:block; background: transparent;
      opacity: 0; transition: opacity 0.6s ease;
    }
    .slideshow img.slide.active{ opacity: 1; }
    .slideshow-caption{ text-align:center; padding:8px 12px; font-size:15px; color: #333; opacity:0.95 }
    .dots{ display:flex; gap:8px; justify-content:center; padding:6px 0 10px; }
    .dots button{ width:8px; height:8px; border-radius:50%; border:0; background: rgba(0,0,0,0.12); }
    .dots button.active{ background: var(--pink); }
    @media (max-width:420px){
      .slideshow{ aspect-ratio: 4/3; }
      .snoopy-wrap{ width: 100px; height: 100px; right: -12px; bottom: -6px; }
    }
    /* small music link */
    .music-control{ text-align:center; margin-top:6px; }
    .music-link{ background:transparent; border:0; color: var(--pink); font-size:14px; padding:6px 8px; cursor:pointer; }
  </style>
</head>
<body>
  <div class="card" role="application" aria-label="Valentine App">
    <div class="snoopy-wrap" aria-hidden="true">
      <img src="Snoopy Heart.png" alt="" class="snoopy-deco">
    </div>
    <div class="top">
      <div class="badge">üíó</div>
      <div>
        <div class="title" id="topTitle">Something for you</div>
        <div class="subtitle" id="topSub">Happy Valentine‚Äôs Day üíò</div>
      </div>
    </div>

    <!-- Background music (hidden) -->
    <audio id="audio" loop>
      <source src="George%20Strait%20Write%20This%20Down%20with%20Lyrics.mp3" type="audio/mpeg">
    </audio>
    <div class="content" id="content">
      <div class="slideshow" id="slideshow">
        <img src="IMG_3542.JPG" class="slide active" alt="">
        <img src="IMG_3555.JPG" class="slide" alt="">
        <img src="IMG_3756.jpg" class="slide" alt="">
        <img src="IMG_3505.jpg" class="slide" alt="">
        <img src="IMG_3480.JPG" class="slide" alt="">
        <div class="dots" id="slideshow-dots"></div>
        <div class="slideshow-caption">These last 7 months have been amazing.</div>
      </div>

      <div class="bubble" id="bubble">Loading...</div>
      <div class="hint" id="hint"></div>
    </div>

    <div class="actions" id="actions">
        <div class="row">
          <button class="secondary" id="backBtn" onclick="back()" disabled>Back</button>
          <button class="primary" id="nextBtn" onclick="next()">Next</button>
        </div>
    </div>
    <div class="music-control">
      <button class="music-link" id="musicBtn" onclick="toggleMusic()">Play music üé∂</button>
    </div>

    <div class="footer">
      <span id="progress">Step 1 of 8</span>
      <span id="signature">‚Äî Noah</span>
    </div>
  </div>

  <!-- Background music player is now visible in the card -->

<script>
  // Play audio on first user interaction (mobile autoplay policy workaround)
  let audioStarted = false;
  function startAudio() {
    if (!audioStarted) {
      const audio = document.getElementById("audio");
      audio.muted = false;
      audio.play().catch(() => {});
      audioStarted = true;
      document.removeEventListener("click", startAudio);
      document.removeEventListener("touchstart", startAudio);
    }
  }
  document.addEventListener("click", startAudio);
  document.addEventListener("touchstart", startAudio);
  // Names + header
  const herName = "Skylar";
  const yourName = "‚Äî Noah";
  const dateLine = "Happy Valentine‚Äôs Day üíò";

  // Prompt journey - personalized messages (not generic)
  const steps = [
    { text: `Hey ${herName} üíó`, hint: "Let's go ü•∞" },
    { text: "I made this for you because you're so special to me.", hint: "Keep reading üíï" },
    { text: "I've been thinking about how much you mean to me.", hint: "Next up..." },
    { text: "You're absolutely stunning, inside and out.", hint: "You look amazing ‚ú®" },
    { text: "I'm so proud of you for becoming an RBT.", hint: "You worked so hard ‚ù§Ô∏è" },
    { text: "Being with you is my favorite part of every day.", hint: "You know this ‚ù§Ô∏è" },
    { text: "There's something I need to ask you.", hint: "The important part" },
    { text: `${herName}‚Ä¶ will you be my Valentine? üíù`, hint: "I really hope so üíï", isQuestion: true },
  ];

  let idx = 0;

  const bubble = document.getElementById("bubble");
  const hint = document.getElementById("hint");
  const progress = document.getElementById("progress");
  const backBtn = document.getElementById("backBtn");
  const signature = document.getElementById("signature");
  const topSub = document.getElementById("topSub");
  const actions = document.getElementById("actions");
  const content = document.getElementById("content");

  signature.textContent = yourName;
  topSub.textContent = dateLine;

  function render() {
    const total = steps.length + 1;
    progress.textContent = `Step ${Math.min(idx+1, total)} of ${total}`;
    backBtn.disabled = idx === 0;

    const step = steps[idx];
    bubble.textContent = step.text;
    hint.textContent = step.hint || "";

    if (step.isQuestion) {
      actions.innerHTML = `
        <div class="row">
          <button class="secondary" onclick="back()">Back</button>
          <button class="primary" onclick="yes()">YES üíñ</button>
        </div>
        <div class="row">
          <button class="secondary" id="noBtn" onclick="no()">No üò∂</button>
        </div>
      `;

      const noBtn = document.getElementById("noBtn");

      noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        dodge(noBtn);
      }, {passive:false});

      noBtn.addEventListener("mouseover", () => dodge(noBtn));
    } else {
      actions.innerHTML = `
        <div class="row">
          <button class="secondary" onclick="back()" ${idx===0?'disabled':''}>Back</button>
          <button class="primary" onclick="next()">Next</button>
        </div>
      `;
    }
  }

  function next() {
    if (idx < steps.length - 1) idx++;
    render();
  }

  function back() {
    if (idx > 0) idx--;
    render();
  }

  function yes() {
    content.innerHTML = `
      <div class="yesScreen">
        <div class="hearts">üíñüíñüíñ</div>
        <img src="Snoopy Heart.png" alt="Snoopy celebration" class="snoopy-cheer">
        <div class="big">YOU'RE MY VALENTINE!</div>
        <p class="small">You just made me the happiest ü•π</p>
        <p class="small">Text me: <b>"YES üíò"</b> and I'll treasure it forever.</p>
        <p class="small">I love you, ${herName}. üíï</p>
        <button class="primary" onclick="confetti()">Celebrate with me ‚ú®</button>
      </div>
    `;
    actions.innerHTML = `
      <div class="row">
        <button class="secondary" onclick="toggleMusic()">üé∂</button>
        <button class="secondary" onclick="share()">Share</button>
      </div>
    `;
    progress.textContent = `Step ${steps.length+1} of ${steps.length+1}`;
  }

  function no() {
    alert("That button appears to be broken ü§î Try the other one üòá");
  }

  function dodge(btn){
    // playful dodge: briefly change text, animate, then move
    try {
      const original = btn.textContent;
      btn.textContent = "Oops!";
      btn.style.transition = "transform 220ms ease, left 300ms ease, top 300ms ease";
      btn.style.position = "fixed";
      const x = Math.floor(Math.random() * (window.innerWidth - btn.offsetWidth - 40)) + 10;
      const y = Math.floor(Math.random() * (window.innerHeight - btn.offsetHeight - 80)) + 60;
      // animate with small transform first
      btn.style.transform = "scale(1.05) rotate(-6deg)";
      setTimeout(()=>{ btn.style.left = x + "px"; btn.style.top = y + "px"; btn.style.transform = "scale(1) rotate(0deg)"; }, 80);
      setTimeout(()=>{ btn.textContent = original; }, 900);
    } catch(e) {
      console.error(e);
    }
  }

  function toggleMusic() {
    const a = document.getElementById("audio");
    audioStarted = true;
    if (a.paused) a.play().catch(()=>{});
    else a.pause();
  }

  function share() {
    if (navigator.share) {
      navigator.share({ title: "üíå For Skylar", text: "Open this üíò", url: location.href }).catch(()=>{});
    } else {
      prompt("Copy this link:", location.href);
    }
  }

  function confetti() {
    for (let i=0; i<30; i++){
      const s = document.createElement("div");
      s.textContent = ["‚ú®","üíñ","üíò","üå∏"][Math.floor(Math.random()*4)];
      s.style.position="fixed";
      s.style.left=(Math.random()*100)+"vw";
      s.style.top="110vh";
      s.style.fontSize=(16+Math.random()*18)+"px";
      s.style.transition="transform 1.2s ease, opacity 1.2s ease";
      document.body.appendChild(s);

      requestAnimationFrame(()=>{
        s.style.opacity="0";
        s.style.transform=`translateY(-140vh) rotate(${Math.random()*360}deg)`;
      });

      setTimeout(()=>s.remove(), 1300);
    }
  }
  // --- Slideshow logic (manual slides; no auto-cycle) ---
  let __slideIndex = 0;

  function showSlide(i){
    const container = document.getElementById('slideshow');
    if (!container) return;
    const slides = Array.from(container.querySelectorAll('img.slide'));
    const dots = document.getElementById('slideshow-dots');
    if (slides.length === 0) return;
    __slideIndex = (i + slides.length) % slides.length;
    slides.forEach((s, idx) => s.classList.toggle('active', idx === __slideIndex));
    if (dots){
      Array.from(dots.children).forEach((d, idx)=> d.classList.toggle('active', idx === __slideIndex));
    }
  }

  function nextSlide(){
    showSlide(__slideIndex + 1);
  }

  function initSlideshow(){
    const container = document.getElementById('slideshow');
    if (!container) return;
    const slides = Array.from(container.querySelectorAll('img.slide'));
    const dotsWrap = document.getElementById('slideshow-dots');
    if (!dotsWrap) return;
    dotsWrap.innerHTML = '';
    slides.forEach((_, idx) => {
      const btn = document.createElement('button');
      btn.addEventListener('click', ()=>{
        showSlide(idx);
        // no auto interval; manual control
      });
      dotsWrap.appendChild(btn);
    });
    showSlide(0);
  }

  // initialize UI
  render();
  // wait a tick to ensure DOM is parsed then init slideshow
  setTimeout(initSlideshow, 50);
</script>
</body>
</html>
